<div class="container text-center">
    <h5 class="mt-3 mb-3">Connectez vous</h5>
    <div class="container mt-3" style="width: 500px;">
        <div *ngIf="err" class="text-danger mt-2">
            {{ err }}
        </div>
        <div class="col">
            <form [formGroup]="myForm">
                <div class="form-floating row mb-3">
                    <input type="text" class="form-control" id="floatingInput1" formControlName="firstName"
                        name="firstName" placeholder="Non d'utilisateur">
                    <label for="floatingInput">Nom d'utilisateur</label>

                    @if(myForm.controls['firstName'].invalid && (myForm.controls['firstName'].dirty ||
                    myForm.controls['firstName'].touched)){
                    <div class="text-danger">
                        Le nom d'utilisateur est obligatoire.
                    </div>
                    }
                </div>

                <div class="form-floating row mb-3">
                    <input type="email" class="form-control" id="floatingInput2" formControlName="email" name="email">
                    <label for="floatingInput" class="col-sm-2 col-form-label">Email</label>

                    @if (myForm.controls['email'].hasError('required')&&
                    myForm.controls['email'].touched) {
                    <span class="text-danger">
                        email est obligatoire
                    </span>
                    }
                    @if(myForm.controls['email'].hasError('email')&&
                    !myForm.controls['email'].hasError('required')&&
                    myForm.controls['email'].touched){
                    <span class="text-danger">
                        email non valide
                    </span>
                    }
                </div>

                <div class="form-floating row mb-3">
                    <input type="password" class="form-control" id="floatingInput3" formControlName="password"
                        name="password">
                    <label for="floatingInput">Password</label>

                    @if(myForm.controls['password'].invalid && (myForm.controls['password'].dirty ||
                    myForm.controls['password'].touched)){
                    <div class="text-danger">
                        Le mot de passe est obligatoire.
                    </div>
                    }
                    @if(myForm.controls['password'].hasError('minlength') &&
                    !myForm.controls['password'].hasError('required')&&
                    myForm.controls['password'].touched){
                    <div class="text-danger">
                        Le mot de passe doit contenir au moins 6 caractères.
                    </div>
                    }
                </div>

                <div class="form-floating row mb-3">
                    <input type="password" class="form-control" id="inputconfirmPassword"
                        formControlName="confirmPassword" name="confirmPassword">
                    <label for="inputPassword">Confirme password</label>

                    @if(myForm.controls['confirmPassword'].invalid && (myForm.controls['confirmPassword'].dirty ||
                    myForm.controls['confirmPassword'].touched)){
                    <div class="text-danger">
                        La confirmation du mot de passe est obligatoire.
                    </div>
                    }
                    @if(myForm.controls['confirmPassword'].hasError('minlength') &&
                    !myForm.controls['confirmPassword'].hasError('required')&&
                    myForm.controls['confirmPassword'].touched){
                    <div class="text-danger">
                        La confirmation du mot de passe doit contenir au moins 6 caractères.
                    </div>
                    }
                    @if(myForm.get('confirmPassword')?.touched &&
                    myForm.get('confirmPassword')?.value != myForm.get('password')?.value){
                    <div class="text-danger">
                        Le mot de passe et la confirmation du mot de passe ne correspondent pas.
                    </div>
                    }
                </div>
                <div class="row mb-3">
                    <button type="button" [disabled]="myForm.invalid" (click)="onRegister()"
                        class="btn btn-success">S'incrire
                    </button>
                </div>
            </form>

        </div>
        <div class="col">
            Vous avez déjà un compte ? <br>
            <a routerLink="/login">Connectez-vous</a>
        </div>
    </div>
</div>